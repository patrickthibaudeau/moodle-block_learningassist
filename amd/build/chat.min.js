define("block_learningassist/chat",["core/str","core/templates","core/ajax"],(function(_str,_templates,_ajax){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax);const sendMessage=async()=>{const input=document.getElementById("block-learningassist-chat-input"),prompt=input.value,chatMessages=document.getElementById("chat-messages"),html=`<div class="chat-message human-message">\n                        <div class="message-content">${prompt}</div>\n                     </div>\n                    <div id="block-learningassist-delete-me" class="chat-message bot-message">\n                        <div class="message-content">\n                        <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>\n                        <span class="sr-only">Loading...</span></div>\n                     </div>`;chatMessages.innerHTML+=html,chatMessages.scrollTop=chatMessages.scrollHeight,input.value="";const courseId=document.getElementById("block-learningassist-courseid").value,chatType=document.getElementById("block-learningassist-chat-type").value;if(prompt){(await _ajax.default.call([{methodname:"block_learningassist_chat",args:{courseid:courseId,chattype:chatType,prompt:prompt}}]))[0].done((result=>{const deleteMe=document.getElementById("block-learningassist-delete-me");deleteMe&&deleteMe.remove();const bot_html=`<div class="chat-message bot-message">\n                            <div class="message-content">${result}</div>\n                         </div>`;chatMessages.innerHTML+=bot_html,input.focus()})).fail((error=>{alert(error)}))}};document.getElementById("block-learningassist-chat-send-btn").addEventListener("click",sendMessage),document.getElementById("block-learningassist-chat-input").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),sendMessage())}))}));

//# sourceMappingURL=chat.min.js.map