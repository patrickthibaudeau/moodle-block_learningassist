define("block_learningassist/chat",["exports","core/str","core/ajax"],(function(_exports,_str,_ajax){var e;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.sendMessage=void 0,_ajax=(e=_ajax)&&e.__esModule?e:{default:e};const sendMessage=async()=>{const input=document.getElementById("block-learningassist-chat-input"),prompt=input.value;if(prompt){const chatMessages=document.getElementById("chat-messages"),html=`<div class="chat-message human-message">\n                        <div class="message-content">${prompt}</div>\n                     </div>\n                    <div id="block-learningassist-delete-me" class="chat-message bot-message">\n                        <div class="message-content">\n                        <i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i>\n                        <span class="sr-only">${await(0,_str.get_string)("loading","block_learningassist")}</span></div>\n                     </div>`;chatMessages.innerHTML+=html,chatMessages.scrollTop=chatMessages.scrollHeight,input.value="";const courseId=document.getElementById("block-learningassist-courseid").value,chatType=document.getElementById("block-learningassist-chat-type").value,chatId=document.getElementById("block-learningassist-chatid").value;if(prompt){(await _ajax.default.call([{methodname:"block_learningassist_chat",args:{courseid:courseId,chattype:chatType,prompt:prompt,chatid:chatId}}]))[0].done((result=>{const deleteMe=document.getElementById("block-learningassist-delete-me");deleteMe&&deleteMe.remove();const bot_html=`<div class="chat-message bot-message">\n                            <div class="message-content">${result}</div>\n                         </div>`;chatMessages.innerHTML+=bot_html,input.focus()})).fail((error=>{console.log(error)}))}}};_exports.sendMessage=sendMessage,document.getElementById("block-learningassist-chat-send-btn").addEventListener("click",sendMessage),document.getElementById("block-learningassist-chat-input").addEventListener("keydown",(e=>{"Enter"===e.key&&(e.preventDefault(),sendMessage())}))}));

//# sourceMappingURL=chat.min.js.map