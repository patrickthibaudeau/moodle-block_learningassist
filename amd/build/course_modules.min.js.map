{"version":3,"file":"course_modules.min.js","sources":["../src/course_modules.js"],"sourcesContent":["import notification from 'core/notification';\nimport ajax from 'core/ajax';\nimport * as Str from 'core/str';\n\nexport const init = () => {\n    display_modules();\n};\n\n/**\n * Display course modules\n */\nfunction display_modules() {\n    // Find all buttons with the new class\n    var buttons = document.querySelectorAll('.block-learningassist-course-module-btn');\n    if (!buttons.length) {\n        return;\n    }\n    buttons.forEach(function (button) {\n        button.addEventListener('click', function () {\n            // get data-courseid from current element\n            var courseid = this.getAttribute('data-courseid');\n            var chatType = this.getAttribute('data-chattype');\n\n            var display_modules = ajax.call([{\n                methodname: 'block_learningassist_display_course_modules',\n                args: {\n                    'courseid': courseid,\n                    'chattype': chatType\n                }\n            }]);\n\n            display_modules[0].done(function (results) {\n                notification.confirm(Str.get_string('train_course_assistant', 'block_ai_assistant'),\n                    results,\n                    Str.get_string('save', 'block_ai_assistant'),\n                    Str.get_string('cancel', 'block_ai_assistant'), function () {\n\n                    });\n\n                setTimeout(function () {\n\n\n                    var blocks = document.querySelectorAll('.blockAiAssistant');\n                    blocks.forEach(function (block) {\n                        block.addEventListener('click', function () {\n                            var dataId = this.getAttribute('data-id');\n                            var contentClassName = 'blockAiAssistantContent-' + dataId;\n                            var contentBlock = document.querySelector('.' + contentClassName);\n                            var folderIcon = this.querySelector('.blockAiAssistantFolderIcon');\n                            if (contentBlock.style.display === 'none' || contentBlock.style.display === '') {\n                                contentBlock.style.display = 'block';\n                                folderIcon.classList.remove('fa-folder');\n                                folderIcon.classList.add('fa-folder-open');\n                            } else {\n                                contentBlock.style.display = 'none';\n                                folderIcon.classList.remove('fa-folder-open');\n                                folderIcon.classList.add('fa-folder');\n                            }\n                        });\n                    });\n\n                }, 1000);\n\n            }).fail(function () {\n                alert('An error has occurred. Cannot display data');\n            });\n\n        });\n    });\n}\n\n\n"],"names":["_getRequireWildcardCache","e","WeakMap","r","t","_interopRequireDefault","__esModule","default","_notification","_ajax","Str","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_interopRequireWildcard","_exports","init","buttons","document","querySelectorAll","length","forEach","button","addEventListener","courseid","this","getAttribute","chatType","ajax","methodname","args","chattype","done","results","notification","confirm","get_string","setTimeout","block","contentClassName","contentBlock","querySelector","folderIcon","style","display","classList","remove","add","fail","alert","display_modules"],"mappings":"gJAEgC,SAAAA,yBAAAC,GAAA,GAAA,mBAAAC,QAAA,OAAA,KAAA,IAAAC,EAAAD,IAAAA,QAAAE,EAAAF,IAAAA,eAAAF,yBAAA,SAAAC,GAAAA,OAAAA,EAAAG,EAAAD,IAAAF,EAAA,CAAA,SAAAI,uBAAAJ,GAAAA,OAAAA,GAAAA,EAAAK,WAAAL,EAAAM,CAAAA,QAAAN,EAAA,8EAFhCO,cAAAH,uBAAAG,eACAC,MAAAJ,uBAAAI,OACAC,IAAgC,SAAAT,EAAAE,GAAAA,IAAAA,GAAAF,GAAAA,EAAAK,WAAAL,OAAAA,EAAAA,GAAAA,OAAAA,GAAAA,iBAAAA,GAAAA,mBAAAA,EAAAM,MAAAA,CAAAA,QAAAN,GAAAG,IAAAA,EAAAJ,yBAAAG,GAAA,GAAAC,GAAAA,EAAAO,IAAAV,GAAA,OAAAG,EAAAQ,IAAAX,GAAA,IAAAY,EAAA,CAAAC,UAAA,MAAAC,EAAAC,OAAAC,gBAAAD,OAAAE,yBAAA,IAAA,IAAAC,KAAAlB,EAAAkB,GAAAA,YAAAA,GAAAC,CAAAA,EAAAA,eAAAC,KAAApB,EAAAkB,GAAAG,CAAAA,IAAAA,EAAAP,EAAAC,OAAAE,yBAAAjB,EAAAkB,GAAAG,KAAAA,IAAAA,EAAAV,KAAAU,EAAAC,KAAAP,OAAAC,eAAAJ,EAAAM,EAAAG,GAAAT,EAAAM,GAAAlB,EAAAkB,GAAAN,OAAAA,EAAAN,QAAAN,EAAAG,GAAAA,EAAAmB,IAAAtB,EAAAY,GAAAA,CAAA,CAAhCW,CAAAd,KAIEe,SAAAC,KAFkBA,MAOpB,WAEI,IAAIC,QAAUC,SAASC,iBAAiB,2CACxC,IAAKF,QAAQG,OACT,OAEJH,QAAQI,SAAQ,SAAUC,QACtBA,OAAOC,iBAAiB,SAAS,WAE7B,IAAIC,SAAWC,KAAKC,aAAa,iBAC7BC,SAAWF,KAAKC,aAAa,iBAEXE,MAAAA,QAAKjB,KAAK,CAAC,CAC7BkB,WAAY,8CACZC,KAAM,CACFN,SAAYA,SACZO,SAAYJ,aAIJ,GAAGK,MAAK,SAAUC,SAC9BC,cAAAA,QAAaC,QAAQnC,IAAIoC,WAAW,yBAA0B,sBAC1DH,QACAjC,IAAIoC,WAAW,OAAQ,sBACvBpC,IAAIoC,WAAW,SAAU,uBAAuB,WAAY,IAIhEC,YAAW,WAGMnB,SAASC,iBAAiB,qBAChCE,SAAQ,SAAUiB,OACrBA,MAAMf,iBAAiB,SAAS,WAC5B,IACIgB,iBAAmB,2BADVd,KAAKC,aAAa,WAE3Bc,aAAetB,SAASuB,cAAc,IAAMF,kBAC5CG,WAAajB,KAAKgB,cAAc,+BACD,SAA/BD,aAAaG,MAAMC,SAAqD,KAA/BJ,aAAaG,MAAMC,SAC5DJ,aAAaG,MAAMC,QAAU,QAC7BF,WAAWG,UAAUC,OAAO,aAC5BJ,WAAWG,UAAUE,IAAI,oBAEzBP,aAAaG,MAAMC,QAAU,OAC7BF,WAAWG,UAAUC,OAAO,kBAC5BJ,WAAWG,UAAUE,IAAI,aAEjC,GACJ,GAEH,GAAE,IAEP,IAAGC,MAAK,WACJC,MAAM,6CACV,GAEJ,GACJ,GACJ,CAhEIC,EAAiB,CAgEpB"}