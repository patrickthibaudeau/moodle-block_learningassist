{"version":3,"file":"ai_policy.min.js","sources":["../src/ai_policy.js"],"sourcesContent":["import ModalSaveCancel from 'core/modal_save_cancel';\nimport ModalEvents from 'core/modal_events';\nimport {get_string as getString} from 'core/str';\nimport ajax from 'core/ajax';\n\n/* eslint-disable no-console */\nexport const init = async () => {\n    // Get element with id ai-policy-status\n    const policyStatus = document.getElementById('ai-policy-status');\n    // Show modal pop-up for poliucy acceptance if policyStatus is empty\n    if (policyStatus.value === '0') {\n        const modal = await ModalSaveCancel.create({\n            title: getString('aipolicyacceptance', 'ai'),\n            body: getString('userpolicy', 'ai'),\n            large: true,\n            buttons: {\n                'save': getString('acceptai', 'ai'),\n                'cancel': getString('declineaipolicy', 'ai'),\n            },\n            show: true,\n        });\n\n        modal.getRoot().on(ModalEvents.save, () => {\n            // Get context id element\n            const contextId = M.cfg.contextid;\n            // Set policy status\n            const setPolicyStatus = ajax.call([{\n                methodname: 'core_ai_set_policy_status',\n                args: {\n                    contextid: contextId,\n                },\n            }]);\n\n            // Refresh the page\n            setPolicyStatus[0].done(() => {\n                window.location.reload();\n            }).fail((error) => {\n                alert('Error setting policy status:', error);\n            });\n        });\n    }\n};"],"names":["async","document","getElementById","value","ModalSaveCancel","create","title","body","large","buttons","show","getRoot","on","ModalEvents","save","contextId","M","cfg","contextid","ajax","call","methodname","args","done","window","location","reload","fail","error","alert"],"mappings":"2fAMoBA,aAIW,MAFNC,SAASC,eAAe,oBAE5BC,MAAe,QACRC,2BAAgBC,OAAO,CACvCC,OAAO,mBAAU,qBAAsB,MACvCC,MAAM,mBAAU,aAAc,MAC9BC,OAAO,EACPC,QAAS,OACG,mBAAU,WAAY,cACpB,mBAAU,kBAAmB,OAE3CC,MAAM,KAGJC,UAAUC,GAAGC,sBAAYC,MAAM,WAE3BC,UAAYC,EAAEC,IAAIC,UAEAC,cAAKC,KAAK,CAAC,CAC/BC,WAAY,4BACZC,KAAM,CACFJ,UAAWH,cAKH,GAAGQ,MAAK,KACpBC,OAAOC,SAASC,YACjBC,MAAMC,QACLC,MAAM,+BAAgCD"}