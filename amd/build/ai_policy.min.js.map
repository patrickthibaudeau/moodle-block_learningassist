{"version":3,"file":"ai_policy.min.js","sources":["../src/ai_policy.js"],"sourcesContent":["import ModalSaveCancel from 'core/modal_save_cancel';\nimport ModalEvents from 'core/modal_events';\nimport {get_string as getString} from 'core/str';\nimport ajax from 'core/ajax';\n\nexport const init = async () => {\n    // Get element with id ai-policy-status\n    const policyStatus = document.getElementById('ai-policy-status');\n    // Show modal pop-up for poliucy acceptance if policyStatus is empty\n    if (policyStatus.value === '0') {\n        const modal = await ModalSaveCancel.create({\n            title: getString('aipolicyacceptance', 'ai'),\n            body: getString('userpolicy', 'ai'),\n            large: true,\n            buttons: {\n                'save': getString('acceptai', 'ai'),\n                'cancel': getString('declineaipolicy', 'ai'),\n            },\n            show: true,\n        });\n\n        modal.getRoot().on(ModalEvents.save, () => {\n            // Get context id element\n            const contextId = document.getElementById('contextid');\n            // Set policy status\n            const setPolicyStatus = ajax.call([{\n                methodname: 'core_ai_set_policy_status',\n                args: {\n                    contextid: contextId.value,\n                },\n            }]);\n\n            // Refresh the page\n            setPolicyStatus[0].done(() => {\n                window.location.reload();\n            }).fail((error) => {\n                alert('Error setting policy status:', error);\n            });\n        });\n    }\n};"],"names":["_interopRequireDefault","e","__esModule","default","_modal_save_cancel","_modal_events","_ajax","_exports","init","async","document","getElementById","value","ModalSaveCancel","create","title","getString","body","large","buttons","save","cancel","show","getRoot","on","ModalEvents","contextId","ajax","call","methodname","args","contextid","done","window","location","reload","fail","error","alert"],"mappings":"wLAG6B,SAAAA,uBAAAC,GAAAA,OAAAA,GAAAA,EAAAC,WAAAD,EAAAE,CAAAA,QAAAF,EAAA,8EAH7BG,mBAAAJ,uBAAAI,oBACAC,cAAAL,uBAAAK,eAEAC,MAAAN,uBAAAM,OAqCEC,SAAAC,KAnCkBC,UAIhB,GAA2B,MAFNC,SAASC,eAAe,oBAE5BC,MAAe,QACRC,mBAAeV,QAACW,OAAO,CACvCC,OAAO,EAAAC,KAAAA,YAAU,qBAAsB,MACvCC,MAAM,EAAAD,KAAAA,YAAU,aAAc,MAC9BE,OAAO,EACPC,QAAS,CACLC,MAAQ,EAAAJ,KAAAA,YAAU,WAAY,MAC9BK,QAAU,EAAAL,KAAAA,YAAU,kBAAmB,OAE3CM,MAAM,KAGJC,UAAUC,GAAGC,cAAWtB,QAACiB,MAAM,KAEjC,MAAMM,UAAYhB,SAASC,eAAe,aAElBgB,MAAAA,QAAKC,KAAK,CAAC,CAC/BC,WAAY,4BACZC,KAAM,CACFC,UAAWL,UAAUd,UAKb,GAAGoB,MAAK,KACpBC,OAAOC,SAASC,QAAQ,IACzBC,MAAMC,QACLC,MAAM,+BAAgCD,MAAM,GAC9C,GAEV,EACF"}